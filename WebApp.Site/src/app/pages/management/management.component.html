<div class="grid-nogutter w-full full-container bg-gray-50" id="full-container">
  <app-analytics-values [cards]="cards"></app-analytics-values>

  <div class="management-container" id="management-container">
    <p-tabView (activeIndexChange)="activeIndexChange($event)">
      <p-tabPanel [headerStyle]="{ width: '33.98%' }">
        <ng-template pTemplate="header">
          <div class="w-full flex align-items-center justify-content-center">
            <i class="pi pi-list mr-2"></i>
            <span *ngIf="screenWidth > 576">Todos</span>
          </div>
        </ng-template>

        <app-table
          class="col-12"
          [values]="registries"
          [columns]="screenWidth >= 768 ? columns : columnsSmallScreen"
          [actions]="actions"
          (valueSelected)="receiveRegistrySelected($event)"
          [registryCategory]="activeIndex"
          (addValue)="addRegistry($event)"
          (dateSelected)="receiveDateSelected($event)"
          [emptyMessage]="'Não há receitas ou despesas registradas'"
        ></app-table>
      </p-tabPanel>
      <p-tabPanel [headerStyle]="{ width: '33%' }">
        <ng-template pTemplate="header">
          <div class="w-full flex align-items-center justify-content-center">
            <i class="pi pi-arrow-down-left text-red-500 mr-2"></i>
            <span *ngIf="screenWidth > 576">Despesas</span>
          </div>
        </ng-template>

        <app-table
          class="col-12"
          [values]="expenses"
          [columns]="screenWidth >= 768 ? columns : columnsSmallScreen"
          [actions]="actions"
          (valueSelected)="receiveRegistrySelected($event)"
          (addValue)="addRegistry($event)"
          [registryCategory]="activeIndex"
          (dateSelected)="receiveDateSelected($event)"
          [emptyMessage]="'Não há despesas registradas'"
        ></app-table>
      </p-tabPanel>
      <p-tabPanel [headerStyle]="{ width: '33%' }">
        <ng-template pTemplate="header">
          <div class="w-full flex align-items-center justify-content-center">
            <i class="pi pi-arrow-up-right text-green-500 mr-2"></i>
            <span *ngIf="screenWidth > 576">Receitas</span>
          </div>
        </ng-template>

        <app-table
          class="col-12"
          [values]="incomes"
          [columns]="screenWidth >= 768 ? columns : columnsSmallScreen"
          [actions]="actions"
          (valueSelected)="receiveRegistrySelected($event)"
          (addValue)="addRegistry($event)"
          [registryCategory]="activeIndex"
          (dateSelected)="receiveDateSelected($event)"
          [emptyMessage]="'Não há receitas registradas'"
        ></app-table>
      </p-tabPanel>
    </p-tabView>
  </div>
</div>

<p-dialog
  [(visible)]="visible"
  [style]="{ width: widthDialog }"
  [draggable]="false"
  styleClass="h-auto {{ headerDialogLoading ? '' : 'hidden' }}"
  [modal]="true"
  (onShow)="setStyleHeaderDialog()"
  (onHide)="onHideDialog()"
>
  <ng-template pTemplate="header">
    <span class="text-xl font-bold text-white">
      {{ typeAction == "edit" ? "Editar" : "Adicionar" }}
      {{ registryCategory == 1 ? "despesa" : "receita" }}
    </span>
  </ng-template>

  <br />

  <app-registry-form
    (registryEmit)="createRegistry($event)"
    (registryEdit)="updateRegistry($event)"
    [registryToEdit]="rowSelected"
    [typeAction]="typeAction"
    [user]="user"
    [registryCategory]="registryCategory"
    [date]="dateSelected"
  ></app-registry-form>
</p-dialog>

<p-toast></p-toast>

<app-spinner *ngIf="showSpinner"></app-spinner>
